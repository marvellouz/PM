#!/bin/sh
#
# Unix shell script to run UMLGraph on the specified base file name
# For this to work you must adjust the following defintion of
# UMLGRAPH_HOME to point to the directory where UmlGraph.jar is installed.
#
# $Id: umlgraph,v 1.5 2008/09/12 15:26:53 dds Exp $
#

UMLGRAPH_HOME=/usr/local/lib

if [ x$2 = x ]
then
	echo usage: umlgraph base_file_name filetype [umlgraph arguments] 1>&2
	echo example: umlgraph MyClass png 1>&2
	echo '(The above will convert MyClass.java into MyClass.png)' 1>&2
	exit 1
else
	BASE=$1
	FILETYPE=$2
	CLASSPATH="$UMLGRAPH_HOME/UmlGraph.jar:$JAVA_HOME/lib/tools.jar:/usr/lib/jvm/java-6-openjdk/lib/tools.jar"
	shift 2
	JAVA="java -classpath $CLASSPATH"
	DOT_INPUT=`$JAVA org.umlgraph.doclet.UmlGraph -package $* -output - $BASE.java`
	echo "$DOT_INPUT" > $BASE.dot
	dot -T$FILETYPE -o$BASE.$FILETYPE $BASE.dot -Granksep=1 -Gsplines=ortho
fi
